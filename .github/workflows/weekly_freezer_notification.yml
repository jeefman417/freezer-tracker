name: Weekly Freezer Notification
on:
  schedule:
    # Runs every Sunday at 2:00 PM UTC (8:00 AM CST / 9:00 AM EST)
    # Format: minute hour day month day-of-week (0 = Sunday)
    - cron: '0 14 * * 0'
  
  # Allows you to manually trigger the workflow from GitHub Actions tab
  workflow_dispatch:

jobs:
  send-freezer-update:
    runs-on: ubuntu-latest
    
    steps:
      - name: Checkout repository
        uses: actions/checkout@v4
      
      - name: Set up Python
        uses: actions/setup-python@v4
        with:
          python-version: '3.11'
      
      - name: Install dependencies
        run: |
          python -m pip install --upgrade pip
          pip install requests
      
      - name: Run Freezer Pushover notification script
        env:
          FREEZER_NOTION_TOKEN: ${{ secrets.FREEZER_NOTION_TOKEN }}
          FREEZER_NOTION_DATABASE_ID: ${{ secrets.FREEZER_NOTION_DATABASE_ID }}
          PUSHOVER_USER_KEY: ${{ secrets.PUSHOVER_USER_KEY }}
          PUSHOVER_API_TOKEN: ${{ secrets.PUSHOVER_API_TOKEN }}
        run: python freezer_bot.py

